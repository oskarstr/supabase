# -----------------------------------------------------------------------------
# Platform stack environment template
#   This file feeds both docker/.env and the repo root .env so the base
#   Supabase stack and the platform overlay share the same configuration.
#   Update values here, then run scripts/platform-stack.sh (or
#   scripts/platform-sync-env.sh) to propagate them.
# -----------------------------------------------------------------------------

# --- Core database credentials ------------------------------------------------
POSTGRES_PASSWORD=your-super-secret-and-long-postgres-password
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=postgres
SUPABASE_DB_URL=postgresql://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
PG_META_CRYPTO_KEY=your-encryption-key-32-chars-min
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
JWT_EXPIRY=3600

# --- Supabase API keys --------------------------------------------------------
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAKfQ.pcNKqKb9zQSeAAs0BsWJs941CPoIGWiJVfKrWXXZzLk
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q
ANON_KEY=$SUPABASE_ANON_KEY
SERVICE_ROLE_KEY=$SUPABASE_SERVICE_KEY

# --- Supabase services --------------------------------------------------------
SUPABASE_URL=http://kong:8000
SUPABASE_PUBLIC_URL=http://host.docker.internal:8000
PGRST_DB_SCHEMAS=public,storage,graphql_public,platform

# --- Platform admin defaults --------------------------------------------------
PLATFORM_ADMIN_EMAIL=admin@example.com
PLATFORM_ADMIN_PASSWORD=supabase
PLATFORM_DEBUG=true

# --- Auth (GoTrue) ------------------------------------------------------------
SITE_URL=http://localhost:3000
API_EXTERNAL_URL=http://localhost:8000
ADDITIONAL_REDIRECT_URLS=
DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
ENABLE_ANONYMOUS_USERS=true
ENABLE_PHONE_SIGNUP=false
ENABLE_PHONE_AUTOCONFIRM=false
SMTP_ADMIN_EMAIL=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=Supabase
MAILER_URLPATHS_INVITE=/auth/v1/verify
MAILER_URLPATHS_CONFIRMATION=/auth/v1/verify
MAILER_URLPATHS_RECOVERY=/auth/v1/verify
MAILER_URLPATHS_EMAIL_CHANGE=/auth/v1/verify
FUNCTIONS_VERIFY_JWT=true

# --- Analytics / Logflare -----------------------------------------------------
LOGFLARE_PUBLIC_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-public
LOGFLARE_PRIVATE_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-private
SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq
VAULT_ENC_KEY=your-encryption-key-32-chars-min
POOLER_TENANT_ID=default
POOLER_PROXY_PORT_TRANSACTION=6543
POOLER_DEFAULT_POOL_SIZE=15
POOLER_MAX_CLIENT_CONN=400
POOLER_DB_POOL_SIZE=10

# --- Kong / Studio ------------------------------------------------------------
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=your-dashboard-password
PLATFORM_DASHBOARD_BASIC_AUTH_ENABLED=false
DASHBOARD_BASIC_AUTH_ENABLED=${PLATFORM_DASHBOARD_BASIC_AUTH_ENABLED}

STUDIO_DEFAULT_ORGANIZATION="Default Organization"
STUDIO_DEFAULT_ORGANIZATION_SLUG=default-organization
STUDIO_DEFAULT_PROJECT="Default Project"
STUDIO_DEFAULT_PROJECT_REF=default
STUDIO_DEFAULT_REGION=local
STUDIO_DEFAULT_CLOUD_PROVIDER=AWS
# Optional overrides
# STUDIO_DEFAULT_PLAN=enterprise
# STUDIO_DEFAULT_FIRST_NAME=Local
# STUDIO_DEFAULT_LAST_NAME=Admin
# STUDIO_DEFAULT_PRIMARY_EMAIL=admin@example.com

# --- Platform runtime orchestration ------------------------------------------
PLATFORM_PROJECT_PORT_BASE=23000
PLATFORM_PROJECT_PORT_STEP=20
PLATFORM_ORCHESTRATOR_URL=http://runtime-agent:8085
PLATFORM_ORCHESTRATOR_TOKEN=supabase-runtime-agent
PLATFORM_RUNTIME_PUBLIC_HOST=host.docker.internal
RUNTIME_AGENT_SUPABASE_HOST=host.docker.internal

# --- Misc ---------------------------------------------------------------------
IMGPROXY_ENABLE_WEBP_DETECTION=true
DOCKER_SOCKET_LOCATION=/var/run/docker.sock
